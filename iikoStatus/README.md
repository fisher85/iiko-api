# iikoStatus

Проверка статуса заказа доставки в Айко. 

Считаем, что клиент в строке поиска (отслеживаемый номер) может указать или номер заказа (если знает), или номер телефона, указанный при оформлении доставки. Необходимо для каждого заказа из базы установить степень "похожести" отслеживаемого номера и двух номеров: номера заказа и номера телефона.

Результат поиска: статус заказа с максимальной "похожестью".

![iikoBoard](https://github.com/fisher85/iiko-api/blob/master/iikoStatus/iikostatus.png)

## Алгоритм работы примера

1. Запрос токена доступа (метод auth/access_token). Далее все обращения к API выполняются с указанием полученного токена доступа.
1. Получение списка организаций, осуществляющих доставку (метод organization/list). Если список пустой, проблема в лицензии. Возможные причины проблемы: лицензия не оплачена, лицензия подключена не к той организации.
1. Получение списка доставок выбранной организации за период времени (метод orders/deliveryOrders).
1. Разбор полученного массива на отдельные заказы, определение степени "похожести" (метод PHP [similar_text](http://php.net/manual/ru/function.similar-text.php)) отслеживаемого номера, номера заказа и номера телефона клиента. 
1. Сортировка массива заказов по убыванию степени "похожести".
1. Вывод статусов заказов, у которых степень "похожести" выше пороговой. Порог определяется экспериментально и условно соответствует допустимому количеству ошибок в указанном номере. Например, при допуске одной ошибки в номере из 11 цифр значение порога может быть выбрано >94%.

## Авторы

Пример разработан в "КвикФуд Технологиях" https://kvikfud.tech.